{"version":3,"sources":["formatters.js","address-us.js","checkbox.js","compound-layout.js","error.js","form-builder.js","form.js","hint.js","label.js","required-marker.js","text.js","textarea.js","obs_utils.js"],"names":[],"mappings":"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","file":"dist/obs_utils.js","sourcesContent":["const _       = require('lodash')\nconst moment  = require('moment')\nconst numeral = require('numeral')\n\nconst Formatters = {\n\n  addressLines(addressObj) {\n    if (_.isEmpty(_.omitBy(addressObj, _.isEmpty)))\n      return []\n    var line1 = addressObj.street_1\n    var line2 = null\n    var line3 = `${addressObj.city}, ${addressObj.state} ${addressObj.zip}`\n    return _.compact(_.concat([], line1, line2, line3))\n  },\n\n  addressOneLine(addressObj) {\n    if (_.isEmpty(_.omitBy(addressObj, _.isEmpty)))\n      return ''\n    return this.addressLines(addressObj).join(', ')\n  },\n\n  currencyDisplay(value, format='dollars') {\n    var numObj\n    numObj = numeral(value)\n    if (format === 'dollars')\n      return numObj.format('$0,0')\n    else\n      return numObj.format('$0,0.00')\n  },\n\n  ordinalize(value) {\n    var ordinal, last_2\n    value = (value || \"\").toString()\n    if (_.isEmpty(value))\n      return ''\n    // check what digit the number ends with for choosing the correct text\n    // ending\n    switch (value.charAt(value.length - 1)) {\n      case '1':\n        ordinal = 'st'\n        break;\n      case '2':\n        ordinal = 'nd'\n        break;\n      case '3':\n        ordinal = 'rd'\n        break;\n      default:\n        ordinal = 'th'\n    }\n    // address some exceptions when looking at larger portion\n    last_2 = value.slice(-2)\n    if (last_2 == '11' || last_2 == '12' || last_2 == '13')\n      ordinal = 'th'\n\n    return value + ordinal\n  },\n\n  // ########\n  //\n  timeFormat:         'h:mm a',\n  // Standard Date Formatter (ex: Jun 3, 2014) - uses locale settings\n  dateFormat:         'll',\n  dollarsFormat:      '$0,0',\n  dollarsCentsFormat: '$0,0.00',\n  monthYearFormat:    'MMM YYYY',\n  monthDayYearFormat: 'MMM D, YYYY',\n  // Default detailed date/time display format\n  dateTimeDetailedFormat: 'MMM DD, YYYY  h:mm:ss a',\n\n\n  // Relative language description of the date/time (ex: \"3 days ago\", \"seconds ago\")\n  timeAgoDisplay(value) {\n    if (_.isEmpty(value))\n      return null\n    return this.parseDate(value).fromNow()\n  },\n\n\n  // Standard Date and Time Formatter (ex: Jun 3, 2014 3:05:53 p)\n  datetimeDisplay(value) {\n    if (_.isEmpty(value))\n      return null\n    return this.parseDate(value).format(this.dateTimeDetailedFormat)\n  },\n\n\n  requiredFormatter(value, options={}) {\n    var options = _.merge({}, {required: false}, options)\n    var errors = []\n\n    if (options.required && _.isEmpty(value))\n      errors.push('is required')\n    return {\n      valid: errors.length === 0,\n      parsed: value,\n      formatted: value,\n      errors\n    }\n  },\n  \n\n  stringFormatter(value, options={}) {\n    var options = _.merge({}, {required: false}, options)\n    var parsed, formatted, errors = []\n\n    if (_.isNumber(value))\n      value = value.toString()\n    if (_.isEmpty(value))\n      value = \"\"\n    parsed = _.trim(value.toString())\n    if (options.required && _.isEmpty(parsed))\n      errors.push('is required')\n    return {\n      valid: errors.length === 0,\n      parsed,\n      formatted: parsed,\n      errors\n    }\n  },\n\n  phoneFormatter(value, options={}) {\n    var val, valid, parsed, formatted, errors = []\n    val = Formatters.stringFormatter(value, options)\n    if (_.isEmpty(val.parsed))\n      return val\n    // remove all non-digits\n    parsed = val.parsed.replace(/\\D/g, '')\n    valid = parsed.length === 10\n    if (valid) {\n      formatted = parsed.replace(/(\\d{3})(\\d{3})(\\d{4})/, '($1) $2-$3')\n    } else {\n      formatted = parsed\n      errors.push('invalid phone number')\n    }\n    return {\n      valid,\n      parsed,\n      formatted,\n      errors\n    }\n  },\n\n  ssnFormatter(value, options={}) {\n    var val, valid, parsed, formatted, errors = []\n    val = Formatters.stringFormatter(value, options)\n    if (_.isEmpty(val.parsed))\n      return val\n    // remove all non-digits\n    parsed = val.parsed.replace(/\\D/g, '')\n    valid = parsed.length === 9\n    if (valid) {\n      formatted = parsed.replace(/^(\\d{3})(\\d{2})(\\d{4})$/, \"$1-$2-$3\")\n    } else {\n      formatted = parsed\n      errors.push('invalid SSN')\n    }\n    return {\n      valid,\n      parsed,\n      formatted,\n      errors\n    }\n  },\n\n  stateFormatter(value, options={}) {\n    var val, valid, parsed, formatted, errors = []\n    val = Formatters.stringFormatter(value, options)\n    if (_.isEmpty(val.parsed))\n      return val\n    // remove 0-9\n    parsed = _.toUpper(val.parsed.replace(/\\d/g, ''))\n    valid = parsed.length === 2\n    if (valid) {\n      formatted = parsed.replace(/^(\\D{2})$/, \"$1\")\n    } else {\n      formatted = parsed\n      errors.push('invalid state')\n    }\n    return {\n      valid,\n      parsed,\n      formatted,\n      errors\n    }\n  },\n\n  zipcodeFormatter(value, options={}) {\n    var val, valid, parsed, formatted, errors = []\n    val = Formatters.stringFormatter(value, options)\n    if (_.isEmpty(val.parsed))\n      return val\n    // remove all non-digits\n    parsed = val.parsed.replace(/\\D/g, '')\n    valid = parsed.length === 5\n    if (valid) {\n      formatted = parsed.replace(/^(\\d{5})$/, \"$1\")\n    } else {\n      formatted = parsed\n      errors.push('is invalid')\n    }\n    return {\n      valid,\n      parsed,\n      formatted,\n      errors\n    }\n  },\n\n  // Currency formatting and validation.\n  //\n  // Options:\n  //   * format - 'dollars' to suppress display of cents. 'cents' - default, full display.\n  currencyFormatter(value, options={}) {\n    var val, numObj, valid, parsed, formatted, errors = []\n    val = Formatters.stringFormatter(value, options)\n    if (_.isEmpty(val.parsed))\n      return val\n    options = _.merge({}, {format: 'cents'}, options)\n    // remove '$', spaces and ','.\n    // Using numeral, convert to a number.\n    numObj = numeral(_.trim(val.parsed.replace(/[$\\s,]/g, '')))\n    parsed = numObj.value()\n    // TODO: numeraljs does not throw errors.... we might want to think about\n    // detecting our own?\n    valid = true\n    if (options.format == 'dollars')\n      formatted = numObj.format('$0,0')\n    else\n      formatted = numObj.format('$0,0.00')\n    return {\n      valid,\n      parsed,\n      formatted,\n      errors\n    }\n  },\n\n  dollarsFormatter(value, options={}) {\n    options['format'] = 'dollars'\n    return Formatters.currencyFormatter(value, options)\n  },\n\n  // Date formatting and validation.\n  //\n  // Options:\n  //  * format - 'full-date' for \"MMM DD, YYYY\". 'month-year' for \"MMM YYYY\"\n  dateFormatter(value, options={}) {\n    var val, temp, valid, parsed, formatted, errors = []\n    val = Formatters.stringFormatter(value, options)\n    if (_.isEmpty(val.parsed))\n      return val\n    options = _.merge({}, {format: 'full-date'}, options)\n    temp = this.parseDate(val.parsed)\n    valid = temp.isValid()\n    if (valid) {\n      // store parsed value as just the date portion.\n      parsed = temp.format('YYYY-MM-DD')\n      if (options.format == 'month-year')\n        formatted = temp.format(this.monthYearFormat)\n      else\n        formatted = temp.format(this.monthDayYearFormat)\n    } else {\n      errors.push('invalid date')\n      formatted = value\n    }\n    return {\n      valid,\n      parsed,\n      formatted,\n      errors\n    }\n  },\n\n  // Time formatting and validation.\n  //\n  // Options:\n  //   * format - 'full-date' for \"MMM DD, YYYY\". 'month-year' for \"MMM YYYY\"\n  timeFormatter(value, options={}) {\n    var val, temp, valid, parsed, formatted, errors = []\n    val = Formatters.stringFormatter(value, options)\n    if (_.isEmpty(val.parsed))\n      return val\n    temp = moment(val.parsed, \"hh:mm:ss a\")\n    valid = temp.isValid()\n    if (valid) {\n      formatted = temp.format(this.timeFormat)\n      parsed    = formatted\n    } else {\n      errors.push('invalid time')\n      formatted = value\n    }\n    return {\n      valid,\n      parsed,\n      formatted,\n      errors\n    }\n  },\n\n  ordinalFormatter(value, options={}) {\n    var parsed, formatted, errors = []\n    // remove all non-digits\n    var {parsed: string} = this.stringFormatter(value, options)\n    parsed = string.replace(/\\D/g, '')\n    // convert an empty string to a null\n    if (_.isEmpty(parsed))\n      parsed = null\n    // if have a parsed value (not blank/empty)\n    if (!_.isEmpty(parsed)) {\n      formatted = this.ordinalize(parsed)\n      // convert parsed value from string to integer storing the value as an\n      // integer.\n      parsed = parseInt(parsed)\n    } else {\n      formatted = parsed\n    }\n    return {\n      valid: true,\n      parsed,\n      formatted,\n      errors\n    }\n  },\n\n  parseDate(date) {\n    // Parse the date using supported formats. Deals with Firefox/Chrome\n    // behavior differences with \"new Date()\" behavior. Specifically an issue\n    // accepting \"Dec 2014\" as a date in Firefox. NOTE: This is not \"strict\"\n    // formatting, so a \"/\" is also allowed as well as not full 2 digit months\n    // or days, and with or without a comma.\n    return moment(date, [\n      // dates\n      'MMDDYYYY',\n      'MMM YYYY',\n      'MMM DD YYYY',\n      'M-D-YYYY',\n      // date times\n      'YYYY-MM-DD h:mm a',\n      'MMM DD YYYY h:mm a',\n      'M-D-YYYY h:mm a',\n      'YYYY-MM-DD h:mm a',\n      // date times with seconds\n      'YYYY-MM-DD h:mm:ss a',\n      'MMM DD YYYY h:mm:ss a',\n      'M-D-YYYY h:mm:ss a',\n      'YYYY-MM-DD h:mm:ss a'\n    ])\n  }\n}\n\nmodule.exports = Formatters\n","const React = require('react')\nconst cx    = require('classnames')\nconst _     = require('lodash')\n\nconst Formatters = require('../formatters/formatters')\n\nconst ObsCompoundLayout = require('./compound-layout')\nconst ObsText           = require('./text')\nconst ObsLabel          = require('./label')\nconst ObsHint           = require('./hint')\nconst ObsError          = require('./error')\n\nconst ObsAddressUs = React.createClass({\n  propTypes: {\n    object:       React.PropTypes.object.isRequired,\n    attr:         React.PropTypes.string.isRequired,\n    onChange:     React.PropTypes.func,\n    onErrorChange:React.PropTypes.func,\n    // errors are an object here (covers multiple fields)\n    errors:       React.PropTypes.object,\n    label:        React.PropTypes.string,\n    hint:         React.PropTypes.string,\n    required:     React.PropTypes.bool,\n    className:    React.PropTypes.string,\n    didMount:     React.PropTypes.func,\n    willUnmount:   React.PropTypes.func\n  },\n\n  fields: {\n    street_1: {name: 'Address', attr: 'street_1'},\n    city:     {name: 'City',    attr: 'city'},\n    state:    {name: 'State',   attr: 'state'},\n    zip:      {name: 'Zip',     attr: 'zip'}\n  },\n\n  getDefaultProps() {\n    return {\n      label: \"Address\"\n    }\n  },\n\n  getInitialState() {\n    return {\n      addressId: _.uniqueId('address1_'),\n      errors: this._addressErrors(this.props.errors)\n    }\n  },\n\n  componentDidMount() {\n    if (_.isFunction(this.props.didMount))\n      this.props.didMount(this)\n  },\n\n  componentWillUnmount() {\n    if (_.isFunction(this.props.willUnmount))\n      this.props.willUnmount(this)\n  },\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({errors: this._addressErrors(nextProps.errors)})\n  },\n\n  _address_attrs() {\n    var list = []\n    _.forOwn(this.fields, (field, value)=> {\n      list.push(this._fullAttrName(value.attr))\n    })\n    return list\n  },\n\n  _addressErrors(errors) {\n    var fullAttrErrors, result = {}\n    // turn fully-qualified errors structure into one that\n    // is only relevant for this context for the defined fields.\n    // {\n    //   \"person.address.state\": [\"is required\"]\n    // }\n    //\n    // Convert to format:\n    //\n    // {\n    //   \"state\": [\"is required\"]\n    // }\n    fullAttrErrors = _.pick(errors, this._address_attrs())\n    // loop through all the defined fields and look for any fully qualified\n    // errors for it. If found, add then to the result object with the local\n    // attr path.\n    _.forOwn(this.fields, (value, field)=> {\n      var errors\n      errors = fullAttrErrors[this._fullAttrName(value.attr)]\n      if (!_.isEmpty(errors))\n        result[value.attr] = errors\n    })\n    return result\n  },\n\n  _getErrors(attr) {\n    return this.state.errors[attr]\n  },\n\n  _anyChildErrors() {\n    return !_.isEmpty(this.state.errors)\n  },\n\n  _fullAttrName(attr) {\n    return `${this.props.attr}.${attr}`\n  },\n\n  _errorsText() {\n    var list = []\n    _.forEach(this.state.errors, (errors, field)=> {\n      _.forEach(errors, (error)=> {\n        list.push(`${this.fields[field].name} ${error}`)\n      })\n    })\n    return list\n  },\n\n  _valueChanged(attr, newVal) {\n    // Fire onChange event for the full attribute name and the updated value.\n    if (_.isFunction(this.props.onChange))\n      this.props.onChange(this._fullAttrName(attr), newVal)\n  },\n\n  _errorsChanged(attr, errors) {\n    var newErrors\n    // update the errors state. start with existing, remove resolved errors and\n    // add new ones.\n    newErrors = this.state.errors\n    if (_.isEmpty(errors))\n      delete newErrors[attr]\n    else\n      newErrors[attr] = errors\n    this.setState({errors: newErrors})\n    // if have onErrorChange event, convert errors back to global version and\n    // fire update\n    if (_.isFunction(this.props.onErrorChange))\n      this.props.onErrorChange(this._fullAttrName(attr), errors)\n  },\n\n  render() {\n    var addrObject, classes\n    addrObject = _.get(this.props.object, this.props.attr) || {}\n\n    classes = cx({\n      'address-us': true,\n      'address-us': true,\n      'form-group': true,\n      'has-child-error': this._anyChildErrors(),\n      [ this.props.className ]: true\n    })\n\n    return (\n      <div className={classes}>\n        <ObsLabel text={this.props.label} required={this.props.required} htmlFor={this.state.addressId} />\n        <ObsHint  hint={this.props.hint} />\n        <ObsCompoundLayout label={this.props.label} layout={\"full\"} className={this.props.className}>\n          <ObsText id={this.state.addressId}\n            object={addrObject} attr={this.fields.street_1.attr} formatter={Formatters.stringFormatter}\n            required={this.props.required} errors={this._getErrors(this.fields.street_1.attr)}\n            placeholder={\"Address\"} onErrorChange={this._errorsChanged}\n            onChange={_.bind(this._valueChanged, this)} className=\"address-line-1\" />\n\n          <ObsCompoundLayout label={this.props.label} layout={\"inline\"} className={this.props.className}>\n            <div className=\"flex-grow-shrink\">\n              <ObsText object={addrObject} attr={this.fields.city.attr} formatter={Formatters.stringFormatter}\n                required={this.props.required} errors={this._getErrors(this.fields.city.attr)}\n                placeholder={\"City\"} onErrorChange={this._errorsChanged}\n                onChange={_.bind(this._valueChanged, this)} className=\"address-city\" />\n            </div>\n            <div className=\"flex-static\">\n              <ObsText object={addrObject} attr={this.fields.state.attr} formatter={Formatters.stateFormatter}\n                required={this.props.required} errors={this._getErrors(this.fields.state.attr)}\n                placeholder={\"ST\"} onErrorChange={this._errorsChanged}\n                onChange={_.bind(this._valueChanged, this)} className=\"address-state state\" />\n            </div>\n            <div className=\"flex-static\">\n              <ObsText object={addrObject} attr={this.fields.zip.attr} formatter={Formatters.zipcodeFormatter}\n                required={this.props.required} errors={this._getErrors(this.fields.zip.attr)}\n                placeholder={\"Zip\"} onErrorChange={this._errorsChanged}\n                onChange={_.bind(this._valueChanged, this)} className=\"address-zipcode zipcode\" />\n            </div>\n          </ObsCompoundLayout>\n        </ObsCompoundLayout>\n        <ObsError errors={this._errorsText()} />\n      </div>\n    )\n  }\n})\n\nmodule.exports = ObsAddressUs\n","const React = require('react')\nconst cx    = require('classnames')\nconst _     = require('lodash')\n\nconst ObsError          = require('./error')\nconst ObsRequiredMarker = require('./required-marker')\nconst ObsHint           = require('./hint')\n\nconst ObsCheckbox = React.createClass({\n  propTypes: {\n    value:        React.PropTypes.bool,\n    onChange:     React.PropTypes.func,\n    label:        React.PropTypes.string,\n    hint:         React.PropTypes.string,\n    required:     React.PropTypes.bool,\n    className:    React.PropTypes.string,\n    id:           React.PropTypes.string,\n    errors:       React.PropTypes.array,   // array of strings\n    didMount:     React.PropTypes.func,\n    willUnmount:   React.PropTypes.func\n  },\n\n  getDefaultProps() {\n    return {\n      required: false,\n      errors:   []\n    }\n  },\n\n  getInitialState() {\n    return {\n      checked: this.props.value\n    }\n  },\n\n  componentDidMount() {\n    if (_.isFunction(this.props.didMount))\n      this.props.didMount(this)\n  },\n\n  componentWillUnmount() {\n    if (_.isFunction(this.props.willUnmount))\n      this.props.willUnmount(this)\n  },\n\n  _valueChanged(e) {\n    this.setState({checked: e.target.checked})\n    if (_.isFunction(this.props.onChange))\n      this.props.onChange(e.target.checked)\n  },\n\n  render() {\n    var bootstrapClasses\n    bootstrapClasses = cx({\n      \"checkbox\": true,\n      \"has-error\":  !_.isEmpty(this.props.errors)\n    })\n\n    return (\n      <div className={this.props.className}>\n        <div className={bootstrapClasses}>\n          <label>\n            <input type=\"checkbox\" id={this.props.id} checked={this.state.checked} onChange={this._valueChanged} />\n            {this.props.label}\n            <ObsRequiredMarker required={this.props.required} />\n          </label>\n          <ObsError errors={this.props.errors} />\n        </div>\n        <ObsHint hint={this.props.hint} />\n      </div>\n    )\n  }\n})\n\nmodule.exports = ObsCheckbox\n","const React = require('react')\nconst cx    = require('classnames')\n\nconst ObsCompoundLayout = React.createClass({\n  propTypes: {\n    // layouts: 'inline', 'full'\n    layout:       React.PropTypes.string,\n    className:    React.PropTypes.string\n  },\n\n  getDefaultProps() {\n    return {\n      layout: 'inline'\n    }\n  },\n\n  render() {\n    var classes\n    classes = cx({\n      'compound-field': true,\n      'form-group': true,\n      'layout-full':   this.props.layout === 'full',\n      'layout-inline': this.props.layout === 'inline',\n      [ this.props.className ]: true\n    })\n\n    return (\n      <div className={classes}>\n        <div className=\"children\">\n          {this.props.children}\n        </div>\n      </div>\n    )\n  }\n})\n\nmodule.exports = ObsCompoundLayout\n","const React = require('react')\nconst _     = require('lodash')\n\nconst ObsError = React.createClass({\n  propTypes: {\n    errors:   React.PropTypes.array\n  },\n\n  getDefaultProps() {\n    return {\n      errors: []\n    }\n  },\n\n  getErrorText() {\n    return this.props.errors.join(', ')\n  },\n\n  render() {\n    if (_.isEmpty(this.props.errors))\n      return <noscript />\n    return <div className=\"error error\">{this.getErrorText()}</div>\n  }\n})\n\nmodule.exports = ObsError\n","const React             = require('react')\nconst ReactDOM          = require('react-dom')\nconst _                 = require('lodash')\nconst cx                = require('classnames')\nconst ObsForm           = require('./form')\nconst ObsLabel          = require('./label')\nconst ObsError          = require('./error')\nconst ObsTextarea       = require('./textarea')\nconst ObsText           = require('./text')\nconst ObsCheckbox       = require('./checkbox')\nconst ObsCompoundLayout = require('./compound-layout')\nconst ObsAddressUs      = require('./address-us')\nconst Formatters        = require('../formatters/formatters')\n\n\n// Expected errors format.\n// errors: {\n//   \"person.name.first\": ['Bad name']\n//   \"address.state\": ['is required']\n// }\n\nvar _getState = function(parent, stateAttr) {\n  return parent.state[stateAttr]\n}\n\nvar _setState = function(parent, stateAttr, newState) {\n  parent.setState({\n    [ stateAttr ]: newState\n  })\n}\n\nconst FormBuilder = {\n\n  // The FormBuilder does not maintain its own state.  Instead, you pass in a\n  // reference (parent) that is maintaining state.  formStateAttr tells us where to\n  // find the data in the parent's state.\n  new(options) {\n    var data = {\n      parent: options.parent,\n      formStateAttr: options.formStateAttr,\n      errorStateAttr: options.errorStateAttr,\n      onSubmit: options.onSubmit,\n      onValueChange: options.onValueChange,\n      onErrorChange: options.onErrorChange,\n      onTouch:       options.onTouch,\n      inputs: [],\n      data() { return _getState(this.parent, this.formStateAttr) },\n      errors() { return _getState(this.parent, this.errorStateAttr) },\n      setData(data) {\n        _setState(this.parent, this.formStateAttr, data)\n        if (_.isFunction(this.onValueChange))\n          this.onValueChange(data)\n      },\n      setErrors(errors) {\n        _setState(this.parent, this.errorStateAttr, errors)\n        if (_.isFunction(this.onErrorChange))\n          this.onErrorChange()\n      },\n      // return if the form builder form is valid\n      isValid() { return _.isEmpty(this.errors()) },\n      // set the value for the attribute name.\n      set(attrName, value) {\n        var state = this.data()\n        _.set(state, attrName, value)\n        this.setData(state)\n      },\n      // get the value for the attribute name.\n      get(attrName) {\n        return _.get(this.data(), attrName)\n      },\n      onSubmit(e) {\n        // ask our components/inputs to report back their validation state -\n        // usefull for inputs that have focus and that would not have reported\n        // back validation\n        var valid = _.reduce(this.inputs, (valid, input)=> {\n          if (!_.isEmpty(input.runValidations()))\n            valid = false\n        }, true)\n\n        // fire our own onSubmit callback\n        if (_.isFunction(this.onSubmit))\n          this.onSubmit(e, valid, this)\n      }\n    }\n\n    return _.extend({}, data, Components)\n  }\n}\n\n\nconst Components = {\n\n  // alias Obs components to make using them easier\n  form: ObsForm,\n  compoundLayout: ObsCompoundLayout,\n  label: ObsLabel,\n\n  textareaField(label, attrName, options={}) {\n    return (\n      <ObsTextarea label={label} hint={options.hint} required={options.required}\n        value={this.get(attrName)} rows={options.rows}\n        className={options.className} id={options.id}\n        onChange={_.bind(this._onChange, this, options, attrName)}\n        placeholder={options.placeholder} errors={this._getErrors(attrName)}\n        didMount={this._register} willUnmount={this._unregister} />\n    )\n  },\n\n  formattedField(label, attrName, formatterFun, options={}) {\n    return (\n      <ObsText label={label} hint={options.hint} required={options.required}\n        object={this.data()} errors={this._getErrors(attrName)} attr={attrName} formatter={formatterFun}\n        className={options.className} id={options.id}\n        onChange={_.bind(this._onChange, this, options)}\n        onErrorChange={_.bind(this._formatErrorChanged, this)}\n        placeholder={options.placeholder}\n        didMount={this._register} willUnmount={this._unregister} />\n    )\n  },\n\n  checkboxField(label, attrName, options={}) {\n    var options = this._mergeClasses(options, 'obs-checkbox')\n    return (\n      <ObsCheckbox label={label} hint={options.hint} required={options.required}\n        value={!!this.get(attrName)} errors={this._getErrors(attrName)}\n        className={options.className} id={options.id}\n        onChange={_.bind(this._onChange, this, options, attrName)}\n        didMount={this._register} willUnmount={this._unregister} />\n    )\n  },\n\n  textField(label, attrName, options={}) {\n    return this.formattedField(label, attrName, Formatters.stringFormatter, options)\n  },\n\n  phoneField(label, attrName, options={}) {\n    return this.formattedField(label, attrName, Formatters.phoneFormatter, this._mergeClasses(options, 'obs-phone'))\n  },\n\n  ssnField(label, attrName, options={}) {\n    return this.formattedField(label, attrName, Formatters.ssnFormatter, this._mergeClasses(options, 'obs-ssn'))\n  },\n\n  stateField(label, attrName, options={}) {\n    return this.formattedField(label, attrName, Formatters.stateFormatter, this._mergeClasses(options, 'obs-state'))\n  },\n\n  zipcodeField(label, attrName, options={}) {\n    return this.formattedField(label, attrName, Formatters.zipcodeFormatter, this._mergeClasses(options, 'obs-zipcode'))\n  },\n\n  currencyField(label, attrName, options={}) {\n    return this.formattedField(label, attrName, Formatters.currencyFormatter, this._mergeClasses(options, 'obs-currency'))\n  },\n\n  dollarsField(label, attrName, options={}) {\n    return this.formattedField(label, attrName, Formatters.dollarsFormatter, this._mergeClasses(options, 'obs-dollars'))\n  },\n\n  dateField(label, attrName, options={}) {\n    // merge the requested format option in for the formatter\n    var formatter = function(value, opt) {\n      return Formatters.dateFormatter(value, _.merge({}, opt, {format: options.format}))\n    }\n    return this.formattedField(label, attrName, formatter, this._mergeClasses(options, 'obs-date'))\n  },\n\n  timeField(label, attrName, options={}) {\n    // merge the requested format option in for the formatter\n    var formatter = function(value, opt) {\n      return Formatters.timeFormatter(value, _.merge({}, opt, {format: options.format}))\n    }\n    return this.formattedField(label, attrName, formatter, this._mergeClasses(options, 'obs-time'))\n  },\n\n  ordinalField(label, attrName, options={}) {\n    return this.formattedField(label, attrName, Formatters.ordinalFormatter, this._mergeClasses(options, 'obs-ordinal'))\n  },\n\n  addressField(label, attrName, options={}) {\n    return (\n      <ObsAddressUs label={label} object={this.data()} attr={attrName} errors={this.errors()}\n        required={options.required} hint={options.hint} className={options.className}\n        onChange={_.bind(this._onChange, this, options)}\n        onErrorChange={_.bind(this._formatErrorChanged, this)}\n        didMount={this._register} willUnmount={this._unregister} />\n    )\n  },\n\n  // private-like methods\n\n  _mergeClasses(options, classes) {\n    options['className'] = cx(options['className'], classes)\n    return options\n  },\n\n  _onChange(options, attrName, value) {\n    this.set(attrName, value)\n    // if given an 'onChange' event in the options, fire it after setting the\n    // value on the object. Pass the attrName after the value as it is\n    // \"optional\". For complex inputs, it gives context to which part that\n    // changed (like with an address).\n    if (_.isFunction(options['onChange']))\n      options['onChange'](value, attrName)\n  },\n\n  _formatErrorChanged(attrName, errors) {\n    // either add or remove the errors stored for the attribute\n    var storedErrors = this.errors()\n    if (_.isEmpty(errors))\n      delete storedErrors[attrName]\n    else\n      storedErrors[attrName] = errors\n    this.setErrors(storedErrors)\n  },\n\n  _getErrors(attrName) {\n    return this.errors()[attrName]\n  },\n\n  _register(input) {\n    if (!_.includes(this.inputs, input))\n      this.inputs.push(input)\n  },\n\n  _unregister(input) {\n    this.inputs = _.without(this.inputs, input)\n  }\n}\n\nmodule.exports = FormBuilder\n","const React = require('react')\n\nconst ObsForm = React.createClass({\n  propTypes: {\n    onSubmit: React.PropTypes.func,\n    builder: React.PropTypes.object\n  },\n\n  onSubmit(e) {\n    e.stopPropagation()\n    e.preventDefault()\n    if (_.isObject(this.props.builder)) {\n      this.props.builder.onSubmit(e)\n    } else if (_.isFunction(this.props.onSubmit)) {\n      this.props.onSubmit(e)\n    }\n  },\n\n  render() {\n    return (\n      <form className=\"form\" onSubmit={this.onSubmit}>\n        {this.props.children}\n      </form>\n    )\n  }\n})\n\nmodule.exports = ObsForm\n","const React = require('react')\n\nconst ObsHint = React.createClass({\n  propTypes: {\n    hint: React.PropTypes.string\n  },\n\n  render() {\n    if (!this.props.hint)\n      return <noscript />\n    return <span className=\"help-block\">{this.props.hint}</span>\n  }\n})\n\nmodule.exports = ObsHint\n","const React             = require('react')\nconst _                 = require('lodash')\nconst ObsRequiredMarker = require('./required-marker')\nconst ObsHint           = require('./hint')\n\n\nconst ObsLabel = React.createClass({\n  propTypes: {\n    text:       React.PropTypes.string,\n    hint:       React.PropTypes.string,\n    required:   React.PropTypes.bool,\n    htmlFor:    React.PropTypes.string\n  },\n\n  getDefaultProps() {\n    return {\n      required: false\n    }\n  },\n\n  somethingToRender() {\n    return !_.isEmpty(this.props.text) || !_.isEmpty(this.props.hint)\n  },\n\n  render() {\n    if (!this.somethingToRender())\n      return <noscript />\n    return (\n      <label className=\"control-label\" htmlFor={this.props.htmlFor}>\n        {this.props.text}\n        <ObsRequiredMarker required={this.props.required} />\n        <ObsHint hint={this.props.hint} />\n      </label>\n    )\n  }\n\n})\n\nmodule.exports = ObsLabel\n","const React = require('react')\n\nconst ObsRequiredMarker = React.createClass({\n  propTypes: {\n    required: React.PropTypes.bool\n  },\n\n  getDefaultProps() {\n    return {\n      required: false\n    }\n  },\n\n  render() {\n    if (!this.props.required)\n      return <noscript />\n    return <span aria-hidden=\"true\" className=\"required_marker\" title=\"Required Field\">*</span>\n  }\n})\n\nmodule.exports = ObsRequiredMarker\n","const React = require('react')\nconst cx    = require('classnames')\nconst _     = require('lodash')\n\nconst ObsLabel   = require('./label')\nconst ObsError   = require('./error')\nconst Formatters = require('../formatters/formatters')\n\nconst ObsText = React.createClass({\n  propTypes: {\n    object:       React.PropTypes.object.isRequired,\n    errors:       React.PropTypes.array,\n    attr:         React.PropTypes.string.isRequired,\n    formatter:    React.PropTypes.func,\n    id:           React.PropTypes.string,\n    className:    React.PropTypes.string,\n    placeholder:  React.PropTypes.string,\n    label:        React.PropTypes.string,\n    hint:         React.PropTypes.string,\n    required:     React.PropTypes.bool,\n    onChange:     React.PropTypes.func,\n    onBlur:       React.PropTypes.func,\n    didMount:     React.PropTypes.func,\n    willUnmount:   React.PropTypes.func\n  },\n\n  getDefaultProps() {\n    return {\n      required: false,\n      errors:   [],\n      id: _.uniqueId('text_'),\n      formatter: Formatters.requiredFormatter\n    }\n  },\n\n  getInitialState() {\n    var result = this.props.formatter(this.value(), {required: this.props.required})\n    return _.pick(result, ['parsed', 'formatted'])\n  },\n\n  componentDidMount() {\n    if (_.isFunction(this.props.didMount))\n      this.props.didMount(this)\n  },\n\n  componentWillUnmount() {\n    if (_.isFunction(this.props.willUnmount))\n      this.props.willUnmount(this)\n  },\n\n  componentWillReceiveProps(nextProps) {\n    // if the props value changes out from under us (if the form is saved for\n    // example and the server returns a new value), update our state with the\n    // new value\n    var nextValue = _.get(nextProps.object, nextProps.attr)\n    if (nextValue !== this.state.parsed)\n      var result = this.props.formatter(nextValue, {required: nextProps.required})\n      this.setState(_.pick(result, ['parsed', 'formatted']))\n  },\n\n  value() {\n    return _.get(this.props.object, this.props.attr)\n  },\n\n  runValidations() {\n    // If valid, display the newly formatted value. Otherwise, continue to\n    // display the value the user entered.\n    var result = this.props.formatter(this.state.formatted, {required: this.props.required})\n    if (result.valid)\n      this.setState({formatted: result.formatted})\n    this.updateFormatErrors(result.errors)\n    return result.errors\n  },\n\n  // forward the new errors along to the form builder\n  updateFormatErrors(newErrors) {\n    if (_.isFunction(this.props.onErrorChange))\n      this.props.onErrorChange(this.props.attr, newErrors)\n  },\n\n  onChange(e) {\n    // parse the newValue using the formatter\n    var newValue = e.target.value\n    var {parsed: parsed} = this.props.formatter(newValue)\n    // update the state with the new parsed value but display what the user\n    // entered unmodified\n    this.setState({parsed, formatted: newValue})\n    // clear out any errors we might have\n    this.updateFormatErrors(null)\n    // finally, forward on the change event so we can update the form builder\n    if (_.isFunction(this.props.onChange))\n      this.props.onChange(this.props.attr, parsed)\n  },\n\n  onBlur() {\n    this.runValidations()\n    // forward the event\n    if (_.isFunction(this.props.onBlur))\n      this.props.onBlur()\n  },\n\n  render() {\n    var groupClasses = cx({\n      \"form-group\": true,\n      \"has-error\":  !_.isEmpty(this.props.errors),\n      [ this.props.className ]: true\n    })\n\n    return (\n      <div className={groupClasses}>\n        <ObsLabel text={this.props.label} hint={this.props.hint} htmlFor={this.props.id}\n          required={this.props.required} />\n        <input id={this.props.id} className=\"form-control\" type=\"text\" value={this.state.formatted}\n          placeholder={this.props.placeholder}\n          onChange={this.onChange} onBlur={this.onBlur} />\n        <ObsError errors={this.props.errors} />\n      </div>\n    )\n  }\n})\n\nmodule.exports = ObsText\n","const React = require('react')\nconst cx    = require('classnames')\nconst _     = require('lodash')\n\nconst ObsLabel = require('./label')\nconst ObsError = require('./error')\n\nconst ObsTextarea = React.createClass({\n  propTypes: {\n    value:        React.PropTypes.string,\n    onChange:     React.PropTypes.func,\n    onBlur:       React.PropTypes.func,\n    label:        React.PropTypes.string,\n    hint:         React.PropTypes.string,\n    required:     React.PropTypes.bool,\n    placeholder:  React.PropTypes.string,\n    className:    React.PropTypes.string,\n    id:           React.PropTypes.string,\n    rows:         React.PropTypes.number,\n    errors:       React.PropTypes.array,  // array of strings\n    didMount:     React.PropTypes.func,\n    willUnmount:   React.PropTypes.func\n  },\n\n  getDefaultProps() {\n    return {\n      required: false,\n      rows:     3\n    }\n  },\n\n  componentDidMount() {\n    if (_.isFunction(this.props.didMount))\n      this.props.didMount(this)\n  },\n\n\n  componentWillUnmount() {\n    if (_.isFunction(this.props.willUnmount))\n      this.props.willUnmount(this)\n  },\n\n  _valueChanged(e) {\n    if (_.isFunction(this.props.onChange))\n      this.props.onChange(e.target.value)\n  },\n\n  render() {\n    var groupClasses\n    groupClasses = cx({\n      \"form-group\": true,\n      \"has-error\":  !_.isEmpty(this.props.errors),\n      [ this.props.className ]: this.props.className\n    })\n\n    return (\n      <div className={groupClasses}>\n        <ObsLabel text={this.props.label} hint={this.props.hint} required={this.props.required} />\n        <textarea id={this.props.id} className=\"form-control\" rows={this.props.rows} type=\"text\" value={this.props.value}\n          placeholder={this.props.placeholder}\n          onChange={this._valueChanged} onBlur={this.props.onBlur} />\n        <ObsError errors={this.props.errors} />\n      </div>\n    )\n  }\n})\n\nmodule.exports = ObsTextarea\n","window.OBSUtils = {\n  Forms: {\n    FormBuilder:     require('./forms/form-builder'),\n    AddressUS:       require('./forms/address-us'),\n    CompoundLayout:  require('./forms/compound-layout'),\n    Error:           require('./forms/error'),\n    Form:            require('./forms/form'),\n    FormattedText:   require('./forms/text'),\n    Hint:            require('./forms/hint'),\n    Label:           require('./forms/label'),\n    RequiredMarker:  require('./forms/required-marker'),\n    Text:            require('./forms/text'),\n    Textarea:        require('./forms/textarea')\n  },\n  Formatters: require(\"./formatters/formatters\")\n}\n"]}