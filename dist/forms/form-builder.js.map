{"version":3,"sources":["form-builder.js"],"names":[],"mappings":";;AAAA,IAAM,QAAoB,QAAQ,OAAR,CAApB;AACN,IAAM,WAAoB,QAAQ,WAAR,CAApB;AACN,IAAM,IAAoB,QAAQ,QAAR,CAApB;AACN,IAAM,KAAoB,QAAQ,YAAR,CAApB;AACN,IAAM,UAAoB,QAAQ,QAAR,CAApB;AACN,IAAM,WAAoB,QAAQ,SAAR,CAApB;AACN,IAAM,WAAoB,QAAQ,SAAR,CAApB;AACN,IAAM,cAAoB,QAAQ,YAAR,CAApB;AACN,IAAM,mBAAoB,QAAQ,kBAAR,CAApB;AACN,IAAM,cAAoB,QAAQ,YAAR,CAApB;AACN,IAAM,oBAAoB,QAAQ,mBAAR,CAApB;AACN,IAAM,eAAoB,QAAQ,cAAR,CAApB;AACN,IAAM,aAAoB,QAAQ,0BAAR,CAApB;;;;;;;;AAUN,IAAM,cAAc;AAElB,qBAAI,QAAQ,QAAoB;QAAZ,gEAAQ,kBAAI;;AAC9B,QAAI,OAAO;AACT,oBADS;AAET,oBAFS;AAGT,qBAAe,QAAQ,aAAR;AACf,qBAAe,QAAQ,aAAR;AACf,eAAe,QAAQ,OAAR;;AAEf,kCAAU;AAAE,gBAAQ,OAAR,CAAgB,KAAK,MAAL,CAAhB,CAAF;OAPD;;;AAST,wBAAI,UAAU,OAAO;AACnB,UAAE,GAAF,CAAM,KAAK,MAAL,EAAa,QAAnB,EAA6B,KAA7B,EADmB;AAEnB,YAAI,EAAE,UAAF,CAAa,KAAK,aAAL,CAAjB,EACE,KAAK,aAAL,CAAmB,KAAK,MAAL,CAAnB,CADF;OAXO;;;AAeT,wBAAI,UAAU;AACZ,eAAO,EAAE,GAAF,CAAM,KAAK,MAAL,EAAa,QAAnB,CAAP,CADY;OAfL;KAAP,CAD0B;;AAqB9B,WAAO,EAAE,MAAF,CAAS,EAAT,EAAa,IAAb,EAAmB,UAAnB,CAAP,CArB8B;GAFd;CAAd;;AA4BN,IAAM,aAAa;;;AAGjB,QAAM,OAAN;AACA,kBAAgB,iBAAhB;AACA,SAAO,QAAP;;AAEA,wCAAc,OAAO,UAAsB;QAAZ,gEAAQ,kBAAI;;AACzC,WACE,oBAAC,WAAD,IAAa,OAAO,KAAP,EAAc,MAAM,QAAQ,IAAR,EAAc,UAAU,QAAQ,QAAR;AACvD,aAAO,KAAK,GAAL,CAAS,QAAT,CAAP,EAA2B,MAAM,QAAQ,IAAR;AACjC,iBAAW,QAAQ,SAAR,EAAmB,IAAI,QAAQ,EAAR;AAClC,gBAAU,EAAE,IAAF,CAAO,KAAK,SAAL,EAAgB,IAAvB,EAA6B,OAA7B,EAAsC,QAAtC,CAAV;AACA,mBAAa,QAAQ,WAAR,EAAqB,QAAQ,KAAK,UAAL,CAAgB,QAAhB,CAAR,EAJpC,CADF,CADyC;GAP1B;AAiBjB,0CAAe,OAAO,UAAU,cAA0B;QAAZ,gEAAQ,kBAAI;;AACxD,WACE,oBAAC,gBAAD,IAAkB,OAAO,KAAP,EAAc,MAAM,QAAQ,IAAR,EAAc,UAAU,QAAQ,QAAR;AAC5D,cAAQ,KAAK,MAAL,EAAa,QAAQ,KAAK,UAAL,CAAgB,QAAhB,CAAR,EAAmC,MAAM,QAAN,EAAgB,WAAW,YAAX;AACxE,iBAAW,QAAQ,SAAR,EAAmB,IAAI,QAAQ,EAAR;AAClC,gBAAU,EAAE,IAAF,CAAO,KAAK,SAAL,EAAgB,IAAvB,EAA6B,OAA7B,CAAV;AACA,eAAS,EAAE,IAAF,CAAO,KAAK,aAAL,EAAoB,IAA3B,CAAT;AACA,qBAAe,EAAE,IAAF,CAAO,KAAK,mBAAL,EAA0B,IAAjC,CAAf;AACA,mBAAa,QAAQ,WAAR,EANf,CADF,CADwD;GAjBzC;AA6BjB,wCAAc,OAAO,UAAsB;QAAZ,gEAAQ,kBAAI;;AACzC,QAAI,UAAU,KAAK,aAAL,CAAmB,OAAnB,EAA4B,cAA5B,CAAV,CADqC;AAEzC,WACE,oBAAC,WAAD,IAAa,OAAO,KAAP,EAAc,MAAM,QAAQ,IAAR,EAAc,UAAU,QAAQ,QAAR;AACvD,aAAO,CAAC,CAAC,KAAK,GAAL,CAAS,QAAT,CAAD,EAAqB,QAAQ,KAAK,UAAL,CAAgB,QAAhB,CAAR;AAC7B,iBAAW,QAAQ,SAAR,EAAmB,IAAI,QAAQ,EAAR;AAClC,gBAAU,EAAE,IAAF,CAAO,KAAK,SAAL,EAAgB,IAAvB,EAA6B,OAA7B,EAAsC,QAAtC,CAAV;AACA,eAAS,EAAE,IAAF,CAAO,KAAK,aAAL,EAAoB,IAA3B,EAAiC,QAAjC,CAAT,EAJF,CADF,CAFyC;GA7B1B;AAwCjB,gCAAU,OAAO,UAAsB;QAAZ,gEAAQ,kBAAI;;AACrC,WAAO,KAAK,cAAL,CAAoB,KAApB,EAA2B,QAA3B,EAAqC,WAAW,eAAX,EAA4B,OAAjE,CAAP,CADqC;GAxCtB;AA4CjB,kCAAW,OAAO,UAAsB;QAAZ,gEAAQ,kBAAI;;AACtC,WAAO,KAAK,cAAL,CAAoB,KAApB,EAA2B,QAA3B,EAAqC,WAAW,cAAX,EAA2B,KAAK,aAAL,CAAmB,OAAnB,EAA4B,WAA5B,CAAhE,CAAP,CADsC;GA5CvB;AAgDjB,8BAAS,OAAO,UAAsB;QAAZ,gEAAQ,kBAAI;;AACpC,WAAO,KAAK,cAAL,CAAoB,KAApB,EAA2B,QAA3B,EAAqC,WAAW,YAAX,EAAyB,KAAK,aAAL,CAAmB,OAAnB,EAA4B,SAA5B,CAA9D,CAAP,CADoC;GAhDrB;AAoDjB,kCAAW,OAAO,UAAsB;QAAZ,gEAAQ,kBAAI;;AACtC,WAAO,KAAK,cAAL,CAAoB,KAApB,EAA2B,QAA3B,EAAqC,WAAW,cAAX,EAA2B,KAAK,aAAL,CAAmB,OAAnB,EAA4B,WAA5B,CAAhE,CAAP,CADsC;GApDvB;AAwDjB,sCAAa,OAAO,UAAsB;QAAZ,gEAAQ,kBAAI;;AACxC,WAAO,KAAK,cAAL,CAAoB,KAApB,EAA2B,QAA3B,EAAqC,WAAW,gBAAX,EAA6B,KAAK,aAAL,CAAmB,OAAnB,EAA4B,aAA5B,CAAlE,CAAP,CADwC;GAxDzB;AA4DjB,wCAAc,OAAO,UAAsB;QAAZ,gEAAQ,kBAAI;;AACzC,WAAO,KAAK,cAAL,CAAoB,KAApB,EAA2B,QAA3B,EAAqC,WAAW,iBAAX,EAA8B,KAAK,aAAL,CAAmB,OAAnB,EAA4B,cAA5B,CAAnE,CAAP,CADyC;GA5D1B;AAgEjB,sCAAa,OAAO,UAAsB;QAAZ,gEAAQ,kBAAI;;AACxC,WAAO,KAAK,cAAL,CAAoB,KAApB,EAA2B,QAA3B,EAAqC,WAAW,gBAAX,EAA6B,KAAK,aAAL,CAAmB,OAAnB,EAA4B,aAA5B,CAAlE,CAAP,CADwC;GAhEzB;AAoEjB,gCAAU,OAAO,UAAsB;QAAZ,gEAAQ,kBAAI;;;AAErC,QAAI,YAAY,SAAZ,SAAY,CAAS,KAAT,EAAgB,GAAhB,EAAqB;AACnC,aAAO,WAAW,aAAX,CAAyB,KAAzB,EAAgC,EAAE,KAAF,CAAQ,EAAR,EAAY,GAAZ,EAAiB,EAAC,QAAQ,QAAQ,MAAR,EAA1B,CAAhC,CAAP,CADmC;KAArB,CAFqB;AAKrC,WAAO,KAAK,cAAL,CAAoB,KAApB,EAA2B,QAA3B,EAAqC,SAArC,EAAgD,KAAK,aAAL,CAAmB,OAAnB,EAA4B,UAA5B,CAAhD,CAAP,CALqC;GApEtB;AA4EjB,gCAAU,OAAO,UAAsB;QAAZ,gEAAQ,kBAAI;;;AAErC,QAAI,YAAY,SAAZ,SAAY,CAAS,KAAT,EAAgB,GAAhB,EAAqB;AACnC,aAAO,WAAW,aAAX,CAAyB,KAAzB,EAAgC,EAAE,KAAF,CAAQ,EAAR,EAAY,GAAZ,EAAiB,EAAC,QAAQ,QAAQ,MAAR,EAA1B,CAAhC,CAAP,CADmC;KAArB,CAFqB;AAKrC,WAAO,KAAK,cAAL,CAAoB,KAApB,EAA2B,QAA3B,EAAqC,SAArC,EAAgD,KAAK,aAAL,CAAmB,OAAnB,EAA4B,UAA5B,CAAhD,CAAP,CALqC;GA5EtB;AAoFjB,sCAAa,OAAO,UAAsB;QAAZ,gEAAQ,kBAAI;;AACxC,WAAO,KAAK,cAAL,CAAoB,KAApB,EAA2B,QAA3B,EAAqC,WAAW,gBAAX,EAA6B,KAAK,aAAL,CAAmB,OAAnB,EAA4B,aAA5B,CAAlE,CAAP,CADwC;GApFzB;AAwFjB,sCAAa,OAAO,UAAsB;QAAZ,gEAAQ,kBAAI;;AACxC,WACE,oBAAC,YAAD,IAAc,OAAO,KAAP,EAAc,QAAQ,KAAK,MAAL,EAAa,MAAM,QAAN,EAAgB,QAAQ,KAAK,MAAL;AACvE,gBAAU,QAAQ,QAAR,EAAkB,MAAM,QAAQ,IAAR,EAAc,WAAW,QAAQ,SAAR;AAC3D,gBAAU,EAAE,IAAF,CAAO,KAAK,SAAL,EAAgB,IAAvB,EAA6B,OAA7B,CAAV;AACA,qBAAe,EAAE,IAAF,CAAO,KAAK,mBAAL,EAA0B,IAAjC,CAAf;AACA,eAAS,EAAE,IAAF,CAAO,KAAK,aAAL,EAAoB,IAA3B,CAAT,EAJF,CADF,CADwC;GAxFzB;;;;;AAoGjB,wCAAc,SAAS,SAAS;AAC9B,YAAQ,WAAR,IAAuB,GAAG,QAAQ,WAAR,CAAH,EAAyB,OAAzB,CAAvB,CAD8B;AAE9B,WAAO,OAAP,CAF8B;GApGf;AAyGjB,gCAAU,SAAS,UAAU,OAAO;AAClC,SAAK,GAAL,CAAS,QAAT,EAAmB,KAAnB;;;;;AADkC,QAM9B,EAAE,UAAF,CAAa,QAAQ,UAAR,CAAb,CAAJ,EACE,QAAQ,UAAR,EAAoB,KAApB,EAA2B,QAA3B,EADF;GA/Ge;AAmHjB,oDAAoB,UAAU,QAAQ;AACpC,QAAI,EAAE,OAAF,CAAU,MAAV,CAAJ,EACE,OAAO,KAAK,MAAL,CAAY,QAAZ,CAAP,CADF,KAGE,KAAK,MAAL,CAAY,QAAZ,IAAwB,MAAxB,CAHF;AAIA,QAAI,EAAE,UAAF,CAAa,KAAK,aAAL,CAAjB,EACE,KAAK,aAAL,GADF;GAxHe;AA6HjB,wCAAc,UAAU;;AAEtB,WAAO,KAAK,MAAL,CAAY,QAAZ,CAAP,CAFsB;AAGtB,QAAI,EAAE,UAAF,CAAa,KAAK,OAAL,CAAjB,EACE,KAAK,OAAL,CAAa,QAAb,EADF;AAEA,QAAI,EAAE,UAAF,CAAa,KAAK,aAAL,CAAjB,EACE,KAAK,aAAL,GADF;GAlIe;AAsIjB,kCAAW,UAAU;AACnB,WAAO,KAAK,MAAL,CAAY,QAAZ,CAAP,CADmB;GAtIJ;CAAb;;AA2IN,OAAO,OAAP,GAAiB,WAAjB","file":"dist/forms/form-builder.js","sourcesContent":["const React             = require('react')\nconst ReactDOM          = require('react-dom')\nconst _                 = require('lodash')\nconst cx                = require('classnames')\nconst ObsForm           = require('./form')\nconst ObsLabel          = require('./label')\nconst ObsError          = require('./error')\nconst ObsTextarea       = require('./textarea')\nconst ObsFormattedText  = require('./formatted-text')\nconst ObsCheckbox       = require('./checkbox')\nconst ObsCompoundLayout = require('./compound-layout')\nconst ObsAddressUs      = require('./address-us')\nconst Formatters        = require('../formatters/formatters')\n\n\n// Expected errors format.\n// errors: {\n//   \"person.name.first\": ['Bad name']\n//   \"address.state\": ['is required']\n// }\n\n\nconst FormBuilder = {\n\n  new(object, errors, options={}) {\n    var data = {\n      object,\n      errors,\n      onValueChange: options.onValueChange,\n      onErrorChange: options.onErrorChange,\n      onTouch:       options.onTouch,\n      // return if the form builder form is valid\n      isValid() { return_.isEmpty(this.errors) },\n      // set the value for the attribute name.\n      set(attrName, value) {\n        _.set(this.object, attrName, value)\n        if (_.isFunction(this.onValueChange))\n          this.onValueChange(this.object)\n      },\n      // get the value for the attribute name.\n      get(attrName) {\n        return _.get(this.object, attrName)\n      }\n    }\n\n    return _.extend({}, data, Components)\n  }\n}\n\n\nconst Components = {\n\n  // alias Obs components to make using them easier\n  form: ObsForm,\n  compoundLayout: ObsCompoundLayout,\n  label: ObsLabel,\n\n  textareaField(label, attrName, options={}) {\n    return (\n      <ObsTextarea label={label} hint={options.hint} required={options.required}\n        value={this.get(attrName)} rows={options.rows}\n        className={options.className} id={options.id}\n        onChange={_.bind(this._onChange, this, options, attrName)}\n        placeholder={options.placeholder} errors={this._getErrors(attrName)} />\n    )\n  },\n\n  formattedField(label, attrName, formatterFun, options={}) {\n    return (\n      <ObsFormattedText label={label} hint={options.hint} required={options.required}\n        object={this.object} errors={this._getErrors(attrName)} attr={attrName} formatter={formatterFun}\n        className={options.className} id={options.id}\n        onChange={_.bind(this._onChange, this, options)}\n        onTouch={_.bind(this._fieldTouched, this)}\n        onErrorChange={_.bind(this._formatErrorChanged, this)}\n        placeholder={options.placeholder} />\n    )\n  },\n\n  checkboxField(label, attrName, options={}) {\n    var options = this._mergeClasses(options, 'obs-checkbox')\n    return (\n      <ObsCheckbox label={label} hint={options.hint} required={options.required}\n        value={!!this.get(attrName)} errors={this._getErrors(attrName)}\n        className={options.className} id={options.id}\n        onChange={_.bind(this._onChange, this, options, attrName)}\n        onTouch={_.bind(this._fieldTouched, this, attrName)} />\n    )\n  },\n\n  textField(label, attrName, options={}) {\n    return this.formattedField(label, attrName, Formatters.stringFormatter, options)\n  },\n\n  phoneField(label, attrName, options={}) {\n    return this.formattedField(label, attrName, Formatters.phoneFormatter, this._mergeClasses(options, 'obs-phone'))\n  },\n\n  ssnField(label, attrName, options={}) {\n    return this.formattedField(label, attrName, Formatters.ssnFormatter, this._mergeClasses(options, 'obs-ssn'))\n  },\n\n  stateField(label, attrName, options={}) {\n    return this.formattedField(label, attrName, Formatters.stateFormatter, this._mergeClasses(options, 'obs-state'))\n  },\n\n  zipcodeField(label, attrName, options={}) {\n    return this.formattedField(label, attrName, Formatters.zipcodeFormatter, this._mergeClasses(options, 'obs-zipcode'))\n  },\n\n  currencyField(label, attrName, options={}) {\n    return this.formattedField(label, attrName, Formatters.currencyFormatter, this._mergeClasses(options, 'obs-currency'))\n  },\n\n  dollarsField(label, attrName, options={}) {\n    return this.formattedField(label, attrName, Formatters.dollarsFormatter, this._mergeClasses(options, 'obs-dollars'))\n  },\n\n  dateField(label, attrName, options={}) {\n    // merge the requested format option in for the formatter\n    var formatter = function(value, opt) {\n      return Formatters.dateFormatter(value, _.merge({}, opt, {format: options.format}))\n    }\n    return this.formattedField(label, attrName, formatter, this._mergeClasses(options, 'obs-date'))\n  },\n\n  timeField(label, attrName, options={}) {\n    // merge the requested format option in for the formatter\n    var formatter = function(value, opt) {\n      return Formatters.timeFormatter(value, _.merge({}, opt, {format: options.format}))\n    }\n    return this.formattedField(label, attrName, formatter, this._mergeClasses(options, 'obs-time'))\n  },\n\n  ordinalField(label, attrName, options={}) {\n    return this.formattedField(label, attrName, Formatters.ordinalFormatter, this._mergeClasses(options, 'obs-ordinal'))\n  },\n\n  addressField(label, attrName, options={}) {\n    return (\n      <ObsAddressUs label={label} object={this.object} attr={attrName} errors={this.errors}\n        required={options.required} hint={options.hint} className={options.className}\n        onChange={_.bind(this._onChange, this, options)}\n        onErrorChange={_.bind(this._formatErrorChanged, this)}\n        onTouch={_.bind(this._fieldTouched, this)} />\n    )\n  },\n\n  // private-like methods\n\n  _mergeClasses(options, classes) {\n    options['className'] = cx(options['className'], classes)\n    return options\n  },\n\n  _onChange(options, attrName, value) {\n    this.set(attrName, value)\n    // if given an 'onChange' event in the options, fire it after setting the\n    // value on the object. Pass the attrName after the value as it is\n    // \"optional\". For complex inputs, it gives context to which part that\n    // changed (like with an address).\n    if (_.isFunction(options['onChange']))\n      options['onChange'](value, attrName)\n  },\n\n  _formatErrorChanged(attrName, errors) {\n    if (_.isEmpty(errors))\n      delete this.errors[attrName]\n    else\n      this.errors[attrName] = errors\n    if (_.isFunction(this.onErrorChange))\n      this.onErrorChange()\n\n  },\n\n  _fieldTouched(attrName) {\n    // remove any server errors from the list if the field was touched.\n    delete this.errors[attrName]\n    if (_.isFunction(this.onTouch))\n      this.onTouch(attrName)\n    if (_.isFunction(this.onErrorChange))\n      this.onErrorChange()\n  },\n\n  _getErrors(attrName) {\n    return this.errors[attrName]\n  }\n}\n\nmodule.exports = FormBuilder\n"]}